<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learning API</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>

<body style="background-color: rgb(8, 26, 88); overflow-x: hidden; word-wrap: break-word;">

    <div class="text-center" style="padding-top: 50px; color: aqua;">
        <h1 class="display-6">Hello World! Get here the funniest jokes..</h1>
        <p class="lead">Get started by clicking Random button</p>
    </div>

    <div id="jokebox" class="text-center text-light" style="padding-top: 100px; padding-right: 15%; padding-left: 15%;">
    </div>

    <div class="text-center" style="padding-top: 100px;">
        <button onclick="getRandom()" type="button" class="btn btn-primary">Random</button>
        <button onclick="getCategList()" type="button" class="btn btn-primary">Categories</button>
        <div style="padding-top: 20px; padding-bottom: 50px;">
            <input type="text" id="searchcategory"
                style="background-color: gray; color: floralwhite; width: 200px; cursor: pointer;">
            <button onclick="getSearchedByCategory()" class="btn btn-primary" type="button">Search by Category</button>
            <br><br>
            <input type="text" id="searchtext"
                style="background-color: gray; color: floralwhite; width: 200px; cursor: pointer;">
            <button onclick="getSearchedByKeyWord()" class="btn btn-primary" type="button">Search by KeyWord</button>
        </div>
    </div>

    <script>



        // var req = new XMLHttpRequest();
        // var url = 'https://api.chucknorris.io/jokes';

        // function getRandom() {
        //     var random = url + '/random';
        //     req.open("GET", random);
        //     req.responseType = 'json';
        //     req.send();

        //     req.onload = function () {
        //         const response = JSON.stringify(req.response.value);
        //         document.getElementById('jokebox').innerHTML = '<h2><b>' + response + '</b></h2>';
        //     }
        // }

        // function getCategList() {
        //     var categ = url + '/categories';
        //     req.open("GET", categ);
        //     req.responseType = 'json';
        //     req.send();

        //     req.onload = function () {
        //         var results = '';
        //         let response = (req.response);
        //         for (ele of response)
        //             results += ele + " ";
        //         document.getElementById('jokebox').innerHTML = '<h2><b>' + results + '</b></h2>';
        //     }
        // }

        // function getSearchedByKeyWord() {
        //     var searchText = document.getElementById('searchtext').value;
        //     var srcTxtUrl = url + '/search?query=' + searchText;
        //     req.open("GET", srcTxtUrl);
        //     req.responseType = 'json';
        //     req.send();

        //     req.onload = function () {
        //         const response = JSON.stringify(req.response.result[27].value);
        //         document.getElementById('jokebox').innerHTML = '<h2><b>' + response + '</b></h2>';
        //     }
        // }

        // function getSearchedByCategory() {
        //     var searchCateg = document.getElementById('searchcategory').value;
        //     var srcCatUrl = url + '/random?category=' + searchCateg;
        //     req.open("GET", srcCatUrl);
        //     req.responseType = 'json';
        //     req.send();

        //     req.onload = function () {
        //         const response = JSON.stringify(req.response.value);
        //         document.getElementById('jokebox').innerHTML = '<h2><b>' + response + '</b></h2>';
        //     }
        // }



        const api_url = 'https://api.chucknorris.io/jokes';

        async function getRandom() {
            let url = api_url + '/random';
            let response = await fetch(url);
            let res = await response.json();
            document.getElementById('jokebox').innerHTML = '<h2><b>' + res.value + '</b></h2>';
        }

        async function getCategList() {
            let results = '';
            let url = api_url + '/categories';
            let response = await fetch(url);
            let res = await response.json();
            for (ele of res)
                        results += ele + " ";
            document.getElementById('jokebox').innerHTML = '<h2><b>' + results + '</b></h2>';
        }

        async function getSearchedByCategory() {
            var searchCateg = document.getElementById('searchcategory').value;
            var url = api_url + '/random?category=' + searchCateg;
            let response = await fetch(url);
            let res = await response.json();
            document.getElementById('jokebox').innerHTML = '<h2><b>' + res.value + '</b></h2>';
        }

        async function getSearchedByKeyWord() {
            var searchText = document.getElementById('searchtext').value;
            var url = api_url + '/search?query=' + searchText;
            let response = await fetch(url);
            let res = await response.json();
            document.getElementById('jokebox').innerHTML = '<h2><b>' + res.result[0].value + '</b></h2>';
        }



    </script>
</body>

</html>